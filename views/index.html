{% extends "base.html" %}
{% block title %} - Home{% endblock %}
{% block content %}
{% if not req.isAuthenticated() %}
     <p>You are not logged in.</p>
{% else %}
     <p>You are logged in. Welcome, {{ user.name }}!</p>
     <table class="w3-table-all" style="width:100%">
     <tr>
	<th>Email</th>
	<th>Name</th>
     </tr>
     <tr>
     	<td>{{ user.email }}</td>
	<td>{{ user.name }}</td>
     </tr>
     </table>
     <form enctype='multipart/form-data' action="upload_video" method="post">
         Title: <input type="text" name="title">
         Description: <input type="text" name="desc">
         Select a file: <input type="file" name="file">
         <input type="submit" value="Submit" action="/">
     </form>
        <section class="experiment recordrtc">
            <h2 class="header">
                <select class="recording-media">
                    <option value="record-video">Video</option>
                    <option value="record-audio">Audio</option>
                    <option value="record-screen">Screen</option>
                </select>
                
                into
                <select class="media-container-format">
                    <option>WebM</option>
                    <option disabled>Mp4</option>
                    <option disabled>WAV</option>
                    <option disabled>Ogg</option>
                    <option>Gif</option>
                </select>
                
                <button>Start Recording</button>
            </h2>

            <div style="text-align: center; display: none;">
                <button id="save-to-disk">Save To Disk</button>
                <button id="open-new-tab">Open New Tab</button>
            </div>

            <br>

            <video controls muted></video>
        </section>
    <script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
    <script src="https://cdn.webrtc-experiment.com/gif-recorder.js"></script>
    <script src="https://cdn.webrtc-experiment.com/getScreenId.js"></script>

    <!-- for Edige/FF/Chrome/Opera/etc. getUserMedia support -->
    <script src="https://cdn.webrtc-experiment.com/gumadapter.js"></script>
    <script src="/script.js"></script>
     {% for video in videos %}
        <iframe width="420" height="315"
          src="https://www.youtube.com/embed/{{ video['videoid'] }}?autoplay=0">
        </iframe>
     {% endfor %}     
{% endif %}
{% endblock %}
